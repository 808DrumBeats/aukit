<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>FMOscillator</title>

    <!-- Tangle -->
    <script type="text/javascript" src="js/Tangle.js"></script>

    <!-- TangleKit (optional) -->
    <link rel="stylesheet" href="js/TangleKit/TangleKit.css" type="text/css">
    <script type="text/javascript" src="js/TangleKit/mootools.js"></script>
    <script type="text/javascript" src="js/TangleKit/sprintf.js"></script>
    <script type="text/javascript" src="js/TangleKit/BVTouchable.js"></script>
    <script type="text/javascript" src="js/TangleKit/TangleKit.js"></script>

    <script src="js/jquery-1.7.2.min.js"></script>

    <link rel="stylesheet" href="css/style.css" type="text/css">
    <script type="text/javascript">

    function setUpTangle () {
        new Tangle(document.getElementById("fmOscillator"), {
            initialize: function () { 
                this.amplitude = 0.2; 
                this.frequency = 440;
                this.carrierMultiplier = 1;
                this.modulatingMultiplier = 1;
                this.modulationIndex = 15;
            },
            update: function () { 
                window.location = 'tangleapp:dict:amplitude,frequency,carrierMultiplier,modulatingMultiplier,modulationIndex:' +
                                              this.amplitude + ',' + 
                                              this.frequency + ',' + 
                                              this.carrierMultiplier + ',' + 
                                              this.modulatingMultiplier + ',' + 
                                              this.modulationIndex;
            }
        });
    }

    </script>
</head>

<body onload="setUpTangle();">

 A simple oscillator with linear interpolation.
<p> 
 Reads from the function table sequentially and repeatedly at given frequency. 
 Linear interpolation is applied for table look up from internal phase values.

 <hr>

<pre id="fmOscillator">
fmOscillator = 
    [[OCSFMOscillator alloc] initWithFTable:sine
                              baseFrequency:ocsp(<span data-var="frequency"            class="TKAdjustableNumber" data-min="20"  data-max="20000" data-step="1"     data-format="%0.0f"></span>) 
                          carrierMultiplier:ocsp(<span data-var="carrierMultiplier"    class="TKAdjustableNumber" data-min="0.0" data-max="3.0"   data-step="0.01"  data-format="%0.2f"></span>)
                       modulatingMultiplier:ocsp(<span data-var="modulatingMultiplier" class="TKAdjustableNumber" data-min="0.0" data-max="3.0"   data-step="0.01"  data-format="%0.2f"></span>)
                            modulationIndex:ocsp(<span data-var="modulationIndex"      class="TKAdjustableNumber" data-min="0"   data-max="30"    data-step="0.1"   data-format="%0.1f"></span>)
                                  amplitude:ocsp(<span data-var="amplitude"            class="TKAdjustableNumber" data-min="0"   data-max="1"     data-step="0.001" data-format="%0.3f"></span>);

</pre>
Play the sound: <div id="play" class="white button">[fmOscillator play];</div>
<p>
Stop the sound: <div id="stop" class="white button">[fmOscillator stop];</div>
<script>
(function ($) {
   $('#play').click(function() { window.location = 'tangleapp:play';})
   $('#stop').click(function() { window.location = 'tangleapp:stop'; })
}(jQuery));
</script>


</body>
</html>
