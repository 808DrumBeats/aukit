<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>FMOscillator</title>

    <!-- Tangle -->
    <script type="text/javascript" src="js/Tangle.js"></script>

    <!-- TangleKit (optional) -->
    <link rel="stylesheet" href="js/TangleKit/TangleKit.css" type="text/css">
    <script type="text/javascript" src="js/TangleKit/mootools.js"></script>
    <script type="text/javascript" src="js/TangleKit/sprintf.js"></script>
    <script type="text/javascript" src="js/TangleKit/BVTouchable.js"></script>
    <script type="text/javascript" src="js/TangleKit/TangleKit.js"></script>

    <!-- example -->
    <link rel="stylesheet" href="css/style.css" type="text/css">
    <script type="text/javascript">

        function setUpTangle () {
            var frequencyTangle = new Tangle(document.getElementById("fmOscillator"), {
                initialize: function () { 
                  this.amplitude = 0.12; 
                  this.frequency = 440;
                  this.carrierMultiplier = 1;
                  this.modulatingMultiplier = 1;
                  this.modulationIndex = 15;
                },
                update: function () { 
                  window.location = 'tangleapp:dict:amplitude,frequency,carrierMultiplier,modulatingMultiplier,modulationIndex:' +
                                    this.amplitude + ',' + 
                                    this.frequency + ',' + 
                                    this.carrierMultiplier + ',' + 
                                    this.modulatingMultiplier + ',' + 
                                    this.modulationIndex;
                }
            });
        }

    </script>
</head>

<body onload="setUpTangle();">

 A simple oscillator with linear interpolation.
<p> 
 Reads from the function table sequentially and repeatedly at given frequency. 
 Linear interpolation is applied for table look up from internal phase values.

 <hr>

<pre id="fmOscillator">
[[OCSFMOscillator alloc] initWithAmplitude:ocsp(<span data-var="amplitude" 
                                                 class="TKAdjustableNumber" 
                                                 data-min="0" 
                                                 data-max="1" 
                                                 data-step="0.001" 
                                                 data-format="%0.3f"></span>)
                             baseFrequency:ocsp(<span data-var="frequency" 
                                                 class="TKAdjustableNumber" 
                                                 data-min="110" 
                                                 data-max="880" 
                                                 data-step="1" 
                                                 data-format="%0.0f"></span>)
                         carrierMultiplier:ocsp(<span data-var="carrierMultiplier" 
                                                 class="TKAdjustableNumber" 
                                                 data-min="0.5" 
                                                 data-max="2.0" 
                                                 data-step="0.01" 
                                                 data-format="%0.2f"></span>) 
                      modulatingMultiplier:ocsp(<span data-var="modulatingMultiplier" 
                                                 class="TKAdjustableNumber" 
                                                 data-min="0.5" 
                                                 data-max="2.0" 
                                                 data-step="0.01" 
                                                 data-format="%0.2f"></span>)
                           modulationIndex:ocsp(<span data-var="modulationIndex" 
                                                 class="TKAdjustableNumber" 
                                                 data-min="0" 
                                                 data-max="30" 
                                                 data-step="0.1" 
                                                 data-format="%0.1f"></span>)
                                    fTable:sine];


<button style="height:40px" onClick="window.location='tangleapp:start'">sound = [[OCSEvent alloc] initWithInstrument:fmOscillator]; [sound trigger];</button>
<button onClick="window.location='tangleapp:stop'" >[sound stop];</button>

<hr>

</pre>


</body>
</html>
