<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Oscillator</title>

    <!-- Tangle -->
    <script type="text/javascript" src="js/Tangle.js"></script>

    <!-- TangleKit (optional) -->
    <link rel="stylesheet" href="js/TangleKit/TangleKit.css" type="text/css">
    <script type="text/javascript" src="js/TangleKit/mootools.js"></script>
    <script type="text/javascript" src="js/TangleKit/sprintf.js"></script>
    <script type="text/javascript" src="js/TangleKit/BVTouchable.js"></script>
    <script type="text/javascript" src="js/TangleKit/TangleKit.js"></script>

    <script src="js/jquery-1.7.2.min.js"></script>

    <link rel="stylesheet" href="css/style.css" type="text/css">
    <script type="text/javascript">

        function setUpTangle () {
            new Tangle(document.getElementById("oscillator"), {
                initialize: function () { 
                    this.frequency = 440;
                    this.amplitude = 0.2; 
                },
                update: function () { 
                    window.location = 'tangleapp:dict:amplitude,frequency:' + this.amplitude + ',' +this.frequency;
                }
            });
        }


    </script>
</head>

<body onload="setUpTangle();">

 A simple oscillator with linear interpolation.
<p> 
 Reads from the function table sequentially and repeatedly at given frequency. 
 Linear interpolation is applied for table look up from internal phase values.

 <hr>

<pre id="oscillator">
oscillator = 
[[OCSOscillator alloc] initWithFTable:sine
                            frequency:ocsp(<span data-var="frequency" 
                                            class="TKAdjustableNumber" 
                                            data-min="110" 
                                            data-max="880" 
                                            data-step="1" 
                                            data-format="%0.0f"></span>)
                            amplitude:ocsp(<span data-var="amplitude" 
                                            class="TKAdjustableNumber" 
                                            data-min="0" 
                                            data-max="1" 
                                            data-step="0.001" 
                                            data-format="%0.3f"></span>)
                                phase:ocsp(0)];

</pre>
Start the sound:<br>
<div id="start" class="white button">
sound = [[OCSEvent alloc] initWithInstrument:oscillator];<br>
[sound trigger];
</div>
<p>
Stop the sound:<br>
<div id="stop" class="white button">[sound stop];</div>
<script>
(function ($) {
   $('#start').click(function() { window.location = 'tangleapp:start';})
   $('#stop').click(function()  { window.location = 'tangleapp:stop'; })
}(jQuery));
</script>

</body>
</html>
